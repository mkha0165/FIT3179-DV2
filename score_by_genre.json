{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 550,
  "height": 430,
  "data": { "url": "movies_merged.csv" },

  "transform": [
    { "filter": "isValid(datum.score) && datum.score > 0" }
  ],

  "mark": { "type": "bar", "cornerRadiusTopLeft": 3, "cornerRadiusTopRight": 3 },

  "encoding": {
    "x": {
      "field": "genre",
      "type": "nominal",
      "title": "Genre",
      "sort": "-y",
      "axis": { "labelAngle": -30, "labelFontSize": 11, "titleFontSize": 13 }
    },
    "y": {
      "aggregate": "mean",
      "field": "score",
      "type": "quantitative",
      "title": "Average Movie Score"
    },
    "color": {
      "field": "genre",
      "type": "nominal",
      "title": "Genre",
      "legend": null,
      "scale": {
    "domain": [
      "Action", "Adventure", "Animation", "Biography", "Comedy", "Crime",
      "Drama", "Family", "Fantasy", "History", "Horror", "Music", "Musical",
      "Mystery", "Romance", "Sci-Fi", "Sport", "Thriller", "Western"
    ],
    "range": [
      "#1f77b4", "#ff7f0e", "#2ca02c", "#9467bd", "#8c564b", "#e377c2",
      "#7f7f7f", "#bcbd22", "#17becf", "#9edae5", "#d62728", "#ffbb78",
      "#c49c94", "#c5b0d5", "#f7b6d2", "#17becf", "#aec7e8", "#b15928", "#393b79"
    ]
  }
    },
    "tooltip": [
      { "field": "genre", "type": "nominal", "title": "Genre" },
      {
        "aggregate": "mean",
        "field": "score",
        "type": "quantitative",
        "title": "Average Score",
        "format": ".2f"
      }
    ]
  },

  "title": {
    "text": "Average Movie Score by Genre",
    "anchor": "middle",
    "fontSize": 15
  },

  "config": {
    "axis": { "labelFontSize": 12, "titleFontSize": 14 },
    "view": { "stroke": "transparent" }
  }
}
